/*! mce-link-button 2020-03-17 */

tinymce.PluginManager.add("mcelb",function(l,t){var i="mcelb";function c(t,e){return(e=new RegExp(e+'="([^"]+)"',"g").exec(t))?window.decodeURIComponent(e[1]):""}function e(t){return t.replace(/\[mcelb([^\]]*)\]/g,function(t,e){return n="mce-link-button",o=c(a=e,"text"),'<a class="mcelb button size-small mceItem '+n+'" data-sh-attr="'+(a=window.encodeURIComponent(a))+'" data-mce-resize="false" data-mce-placeholder="0" style="display: inline-block; cursor: pointer;">'+o+"</a>";var n,a,o})}l.addCommand("mce-link-button-popup",function(t,e){var n="";e.text&&(n=e.text);var a="http://";e.link&&(a=e.link);var o="self";e.target&&(o=e.target),elem="",void 0!==e.elem&&(elem=e.elem),l.windowManager.open({title:"MCE Link Button",body:[{type:"textbox",name:"text",label:"Text",value:n,tooltip:""},{type:"textbox",name:"link",label:"Link",value:a,tooltip:""},{type:"listbox",name:"target",label:"Target",value:o,values:[{text:"Same Page",value:"self"},{text:"New Page",value:"blank"}],tooltip:"Select link target"}],onsubmit:function(t){elem&&elem.parentNode.removeChild(elem);var e="["+i;void 0!==t.data.text&&t.data.text.length&&(e+=' text="'+t.data.text+'"'),void 0!==t.data.link&&t.data.link.length&&(e+=' link="'+t.data.link+'"'),void 0!==t.data.target&&t.data.target.length&&(e+=' target="'+t.data.target+'"'),e+="]",l.insertContent(e)}})}),l.addButton("mcelb",{icon:"mce-button-shortcode",tooltip:"MCE Link Button",onclick:function(){l.execCommand("mce-link-button-popup","",{text:"Download",link:"https://",target:"self"})}}),l.on("BeforeSetcontent",function(t){t.content=e(t.content)}),l.on("GetContent",function(t){t.content=t.content.replace(/(?:<p(?:[^>]+)?>)*(<a class="mcelb [^>]+>[^<]+<\/a>)(?:<\/p>)*/g,function(t,e){var n=c(e,"data-sh-attr");return n?"<p>["+i+n+"]</p>":t})}),l.on("Click",function(t){t.target.className.indexOf("mcelb");if("A"==t.target.nodeName&&-1<t.target.className.indexOf("mce-link-button")){var e=t.target.attributes["data-sh-attr"].value;e=window.decodeURIComponent(e),l.execCommand("mce-link-button-popup","",{text:c(e,"text"),link:c(e,"link"),target:c(e,"target"),elem:t.target})}})});