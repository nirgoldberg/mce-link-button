/*! mce-link-button 2021-04-25 */

tinymce.PluginManager.add("mcelb",function(i,t){var d="mcelb";function n(t,e){return(e=new RegExp(e+'="([^"]+)"',"g").exec(t))?window.decodeURIComponent(e[1]):""}function e(t){return t.replace(/\[mcelb([^\]]*)\]/g,function(t,e){return o="mce-link-button",e=n(a=e,"text"),'<a class="mcelb button mceItem '+o+'" data-sh-attr="'+(a=window.encodeURIComponent(a))+'" data-mce-resize="false" data-mce-placeholder="0" style="display: inline-block; cursor: pointer;">'+e+"</a>";var o,a})}i.addCommand("mce-link-button-popup",function(t,e){var o="";e.text&&(o=e.text);var a="http://";e.link&&(a=e.link);var n="self";e.target&&(n=e.target);var l=!1;e.customStyle&&(l=e.customStyle);var r="#2D2D2D";e.fontColor&&(r=e.fontColor);var c="#EEEBE9";e.bgColor&&(c=e.bgColor),elem="",void 0!==e.elem&&(elem=e.elem),i.windowManager.open({title:"MCE Link Button",body:[{type:"textbox",name:"text",label:"Text",value:o,tooltip:""},{type:"textbox",name:"link",label:"Link",value:a,tooltip:""},{type:"listbox",name:"target",label:"Target",value:n,values:[{text:"Same Page",value:"self"},{text:"New Page",value:"blank"}],tooltip:"Select link target"},{type:"listbox",name:"customStyle",label:"Custom Style",value:l,values:[{text:"No",value:"no"},{text:"Yes",value:"yes"}],tooltip:""},{type:"colorpicker",name:"fontColor",label:"Font Color",value:r,tooltip:""},{type:"colorpicker",name:"bgColor",label:"Background Color",value:c,tooltip:""}],onsubmit:function(t){elem&&elem.parentNode.removeChild(elem);var e="["+d;void 0!==t.data.text&&t.data.text.length&&(e+=' text="'+t.data.text+'"'),void 0!==t.data.link&&t.data.link.length&&(e+=' link="'+t.data.link+'"'),void 0!==t.data.target&&t.data.target.length&&(e+=' target="'+t.data.target+'"'),void 0!==t.data.customStyle&&t.data.customStyle.length&&(e+=' custom_style="'+t.data.customStyle+'"'),void 0!==t.data.fontColor&&t.data.fontColor.length&&(e+=' font_color="'+t.data.fontColor+'"'),void 0!==t.data.bgColor&&t.data.bgColor.length&&(e+=' bg_color="'+t.data.bgColor+'"'),i.insertContent(e+="]")}})}),i.addButton("mcelb",{icon:"mce-button-shortcode",tooltip:"MCE Link Button",onclick:function(){i.execCommand("mce-link-button-popup","",{text:"Download",link:"https://",target:"self",custom_style:"no",font_color:"#2D2D2D",bg_color:"#EEEBE9"})}}),i.on("BeforeSetcontent",function(t){t.content=e(t.content)}),i.on("GetContent",function(t){t.content=t.content.replace(/(?:<p(?:[^>]+)?>)*(<a class="mcelb [^>]+>[^<]+<\/a>)(?:<\/p>)*/g,function(t,e){e=n(e,"data-sh-attr");return e?"<p>["+d+e+"]</p>":t})}),i.on("Click",function(t){var e;t.target.className.indexOf("mcelb");"A"==t.target.nodeName&&-1<t.target.className.indexOf("mce-link-button")&&(e=t.target.attributes["data-sh-attr"].value,e=window.decodeURIComponent(e),i.execCommand("mce-link-button-popup","",{text:n(e,"text"),link:n(e,"link"),target:n(e,"target"),customStyle:n(e,"custom_style"),fontColor:n(e,"font_color"),bgColor:n(e,"bg_color"),elem:t.target}))})});